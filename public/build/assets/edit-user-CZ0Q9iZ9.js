import{r as U,q as B,v as L,j as s,$ as A,Y as P}from"./app-D9kuR52c.js";import{B as D}from"./breadcrumbs-DGzWbXvX.js";import{I as V}from"./user-menu-content-BDEgcOoZ.js";import{B as m}from"./button-BjOzoRrv.js";import{I as c}from"./input-dIWTI1u3.js";import{L as o}from"./label-DMmHRTSl.js";import{A as $,S as f}from"./react-select.esm-Ba7Pd2eS.js";import{I as v}from"./input-error-BVrLRWWU.js";import{S as R}from"./switch-BvK4hItS.js";import{r as u,E as b,a as w}from"./dataSelect-B5U-ybLH.js";import{A as Y}from"./app-alert-success-BLxyZq2B.js";import{C as q}from"./customer-layout-BZsK3IxV.js";import{U as M}from"./user-cog-CqkH2csk.js";import{S as G}from"./save-D6h96HWu.js";import"./chevron-right-IFlCLI3h.js";import"./index-BgW-0Ue0.js";import"./index-CUsKSY_N.js";import"./index-BfLciqpW.js";import"./x-DNUXtwU4.js";import"./index-DPGVhj7j.js";import"./index-CiIijPUX.js";function ps({user:e,companies:N}){var h,j,g;const[r,p]=U.useState(!1),{flash:x,auth:n}=B().props,y=[{title:"Dashboard",href:"/panel"},{title:"Usuários",href:(h=n==null?void 0:n.user)!=null&&h.company_id?"/panel":"/panel/customerusers"},{title:"Alterar",href:"/panel/customerusers"}],d=N.map(a=>({value:a.id,label:a.subname})),{data:l,setData:i,put:S,processing:C,errors:t}=L({organization_id:e==null?void 0:e.organization_id,company_id:e==null?void 0:e.company_id,name:e==null?void 0:e.name,email:e==null?void 0:e.email,roles:e==null?void 0:e.roles,status:e==null?void 0:e.status,password:"",password_confirmation:""}),_=a=>{i("roles",a==null?void 0:a.value)},k=a=>{i("company_id",a==null?void 0:a.value)},F=a=>{a.preventDefault(),S(route("customerusers.update",e==null?void 0:e.id))},z=(j=u)==null?void 0:j.filter(a=>a.value==(e==null?void 0:e.roles)).map(a=>({value:a.label,label:a.label})),I=d==null?void 0:d.filter(a=>a.value==(e==null?void 0:e.company_id)).map(a=>({value:a.value,label:a.label}));return s.jsxs(q,{children:[s.jsx(A,{title:"Usuários"}),x.message&&s.jsx(Y,{message:x.message}),s.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(V,{iconNode:M,className:"w-8 h-8"}),s.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Usuários"})]}),s.jsx("div",{children:s.jsx(D,{breadcrumbs:y})})]}),s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsx("div",{children:s.jsx(m,{variant:"default",asChild:!0,children:s.jsxs(P,{href:route((g=n==null?void 0:n.user)!=null&&g.company_id?"panel":"customerusers.index"),children:[s.jsx($,{"h-4":!0,"w-4":!0}),s.jsx("span",{children:"Voltar"})]})})}),s.jsx("div",{})]}),s.jsx("div",{className:"p-4",children:s.jsx("div",{className:"border rounded-lg p-2",children:s.jsxs("form",{onSubmit:F,className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(o,{htmlFor:"company_id",children:"Filial"}),s.jsx(f,{defaultValue:I,options:d,onChange:k,placeholder:"Selecione a filial",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:{control:(a,E)=>({...a,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:a=>({...a}),menuList:a=>({...a,fontSize:"14px"})}}),s.jsx(v,{className:"mt-2",message:t.company_id})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(o,{htmlFor:"name",children:"Nome"}),s.jsx(c,{value:l.name,type:"text",id:"name",onChange:a=>i("name",a.target.value)}),t.name&&s.jsx("div",{className:"text-red-500 text-sm",children:t.name})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(o,{htmlFor:"email",children:"E-mail"}),s.jsx(c,{id:"email",type:"text",value:l.email,onChange:a=>i("email",a.target.value)}),t.email&&s.jsx("div",{className:"text-red-500 text-sm",children:t.email})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(o,{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(c,{type:r?"text":"password",id:"password",value:l.password,onChange:a=>i("password",a.target.value)}),s.jsx("div",{className:"absolute top-0 right-0 text-gray-600",children:s.jsx(m,{variant:"link",size:"icon",type:"button",onClick:()=>p(!r),children:r?s.jsx(b,{}):s.jsx(w,{})})})]}),t.password&&s.jsx("div",{className:"text-red-500 text-sm",children:t.password})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(o,{htmlFor:"password_confirmation",children:"Confirme a senha"}),s.jsxs("div",{className:"relative",children:[s.jsx(c,{type:r?"text":"password",id:"password_confirmation",value:l.password_confirmation,onChange:a=>i("password_confirmation",a.target.value)}),s.jsx("div",{className:"absolute top-0 right-0 text-gray-600",children:s.jsx(m,{variant:"link",size:"icon",type:"button",onClick:()=>p(!r),children:r?s.jsx(b,{}):s.jsx(w,{})})})]}),t.password_confirmation&&s.jsx("div",{className:"text-red-500 text-sm",children:t.password_confirmation})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[s.jsxs("div",{className:" grid gap-2",children:[s.jsx(o,{htmlFor:"recipient",children:"Funções do usuário"}),s.jsx(f,{menuPosition:"fixed",defaultValue:z,options:u,onChange:_,placeholder:"Selecione o recebedor",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:{control:(a,E)=>({...a,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:a=>({...a}),menuList:a=>({...a,fontSize:"14px"})}}),s.jsx(v,{className:"mt-2",message:t.roles})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(o,{htmlFor:"status",children:"Status do usuário"}),s.jsx(R,{id:"status",checked:l.status,onCheckedChange:a=>i("status",a)})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(m,{type:"submit",disabled:C,children:[s.jsx(G,{}),"Salvar"]})})]})})})]})}export{ps as default};
